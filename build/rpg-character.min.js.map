{"version":3,"sources":["rpg-character.js"],"names":["exports","global","define","internal","finalize","get","defined","pending","definitions","initDefinition","$cachelyToken","$depsRequiredByDefinitionToken","Function","name","args","arguments","val","apply","resolve","fn","i","len","dependencyName","deps","length","hasOwnProperty","push","dispatcher","whichAnimationEvent","Character","suit","x","y","keys","speed","isMoveKey","keyCode","keyMap","up","down","left","right","hasActionKey","downKeys","handleDownKeys","activeAction","walkKeys","containsActions","key","actionKey","self","setAction","actionKeys","move","el","classList","contains","add","remove","body","this","accessories","afterAction","keyMapInverse","document","createElement","appendChild","handleKeyDown","indexOf","handleKeyUp","index","splice","deltaX","deltaY","cls","dir","addAction","endClass","getAction","onFinishCallback","end","intv","clearTimeout","removeEventListener","aniEvent","dispatch","events","ACTION_END","addEventListener","ACTION_START","addAccessory","a","className","removeAccessory","removeChild","render","create","isFunction","Event","validateEvent","e","Error","target","scope","map","getIndexOfListener","event","callback","list","listeners","cb","off","on","priority","undefined","sort","prioritySort","once","b","mapListeners","item","number","getListeners","strict","concat","removeAllListeners","fire","immediatePropagationStopped","bind","func","call","type","defaultPrevented","propagationStopped","prototype","preventDefault","stopPropagation","stopImmediatePropagation","toString","t","animations","animation","OAnimation","MozAnimation","WebkitAnimation","style"],"mappings":"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","file":"rpg-character.min.js"}